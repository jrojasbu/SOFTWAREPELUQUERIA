<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n Peluquer√≠a Magical Hair Premium</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <nav class="tabs">
        <img src="{{ url_for('static', filename='Magical_Hair.png') }}" alt="Logo" class="sidebar-logo">

        <div class="sidebar-sede-selector">
            <label for="sedeSelector">Sede Actual</label>
            <select id="sedeSelector" class="sede-selector" onchange="changeSede()">
                {% for sede in sedes %}
                <option value="{{ sede }}">{{ sede }}</option>
                {% endfor %}
            </select>
        </div>

        <button class="tab-btn active" onclick="openTab('services')">Servicios</button>
        <button class="tab-btn" onclick="openTab('products')">Productos</button>
        <button class="tab-btn" onclick="openTab('expenses')">Gastos</button>
        <button class="tab-btn" onclick="openTab('agenda')">Agenda</button>
        <button class="tab-btn" onclick="openTab('inventory')">Inventario</button>
        <button class="tab-btn" onclick="openTab('summary')">Resumen</button>
        <button class="tab-btn" onclick="openTab('statistics')">Estad√≠sticas</button>
        <button class="tab-btn" onclick="openTab('monthly-expenses')">Gastos Fijos</button>
        <button class="tab-btn" onclick="openTab('config')">Configuraci√≥n</button>

        <div class="sidebar-footer">
            <!-- Toggle Modo Oscuro -->
            <div class="darkmode-toggle-wrap">
                <button class="darkmode-btn" id="darkmodeBtn" onclick="toggleDarkMode()">
                    <span class="dm-icon" id="dmIcon">üåô</span>
                    <span id="dmLabel">Modo Oscuro</span>
                </button>
            </div>
            <!-- Toggle Apariencia Contenedor -->
            <div class="appearance-toggle-wrap">
                <span class="appearance-toggle-label">üé® Apariencia</span>
                <div class="appearance-toggle" id="appearanceToggle" onclick="toggleContainerStyle()"
                    title="Cambiar entre trasl√∫cido y s√≥lido">
                    <div class="toggle-option" id="toggleOptGlass">üîÆ Glass</div>
                    <div class="toggle-option active" id="toggleOptSolid">‚¨ú S√≥lido</div>
                    <div class="toggle-slider"></div>
                </div>
            </div>
            <a href="/admin" class="sidebar-btn admin">‚öôÔ∏è Administraci√≥n</a>
            <a href="/logout" class="sidebar-btn logout">üö™ Cerrar Sesi√≥n</a>
        </div>
    </nav>

    <div class="container">
        <header>
            <div
                style="font-size: 0.75rem; color: #94a3b8; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">
                Magical Hair Premium v4.0 &copy; 2026</div>
            <h1>Gesti√≥n Peluquer√≠a Magical Hair</h1>
            <p>Panel de Control Diario</p>
        </header>

        <main>
            <!-- Servicios Section -->
            <section id="services" class="tab-content active">
                <h2>Registrar Servicio</h2>
                <form id="serviceForm">
                    <div class="input-group">
                        <label>Estilista</label>
                        <select name="estilista" required>
                            <option value="" disabled selected>Seleccione un estilista</option>
                            {% for stylist in stylists %}
                            <option value="{{ stylist }}">{{ stylist }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Servicio</label>
                        <select name="servicio" required>
                            <option value="" disabled selected>Seleccione un servicio</option>
                            {% for service in services %}
                            <option value="{{ service.name }}" data-price="{{ service.value }}">{{ service.name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Valor ($)</label>
                        <input type="number" name="valor" placeholder="0.00" required>
                    </div>
                    <div class="input-group">
                        <label>M√©todo de Pago</label>
                        <select name="metodo_pago" required>
                            <option value="Efectivo">Efectivo</option>
                            <option value="Tarjeta">Tarjeta</option>
                            <option value="NEQUI">NEQUI</option>
                            <option value="Daviplata">Daviplata</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">Registrar Servicio</button>
                </form>
            </section>

            <!-- Agenda Section -->
            <section id="agenda" class="tab-content">
                <h2>Agenda de Citas</h2>
                <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 300px;">
                        <h3>Agendar Nueva Cita</h3>
                        <form id="appointmentForm">
                            <div class="input-group">
                                <label>Fecha</label>
                                <input type="date" name="fecha" required>
                            </div>
                            <div class="input-group">
                                <label>Hora</label>
                                <input type="time" name="hora" required>
                            </div>
                            <div class="input-group">
                                <label>Nombre del Cliente</label>
                                <input type="text" name="cliente" placeholder="Nombre completo" required>
                            </div>
                            <div class="input-group">
                                <label>Tel√©fono Celular</label>
                                <input type="tel" name="telefono" placeholder="N√∫mero de contacto" required>
                            </div>
                            <div class="input-group">
                                <label>Servicio</label>
                                <select name="servicio" required>
                                    <option value="" disabled selected>Seleccione un servicio</option>
                                    {% for service in services %}
                                    <option value="{{ service.name }}">{{ service.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Notas (Opcional)</label>
                                <textarea name="notas" placeholder="Detalles adicionales..." rows="3"></textarea>
                            </div>
                            <button type="submit" class="submit-btn">Agendar Cita</button>
                        </form>
                    </div>

                    <div style="flex: 1.5; min-width: 400px;">
                        <h3>Citas Programadas</h3>
                        <div class="input-group" style="margin-bottom: 1rem;">
                            <label>Ver Citas del D√≠a:</label>
                            <input type="date" id="agendaDate" onchange="loadAppointments()">
                        </div>

                        <div class="table-container">
                            <table class="summary-table">
                                <thead>
                                    <tr>
                                        <th>Hora</th>
                                        <th>Cliente</th>
                                        <th>Tel√©fono</th>
                                        <th>Servicio</th>
                                        <th>Notas</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="appointmentsBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Productos Section -->
            <section id="products" class="tab-content">
                <h2>Registrar Venta</h2>
                <form id="productForm">
                    <div class="input-group">
                        <label>Vendedor</label>
                        <select name="estilista" required>
                            <option value="" disabled selected>Seleccione un vendedor</option>
                            {% for stylist in stylists %}
                            <option value="{{ stylist }}">{{ stylist }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Producto</label>
                        <input type="text" name="producto" id="saleProducto" list="productList"
                            placeholder="Nombre del producto" required>
                    </div>
                    <div class="input-group">
                        <label>Marca</label>
                        <input type="text" name="marca" id="saleMarca" placeholder="Marca (opcional)">
                    </div>
                    <div class="input-group">
                        <label>Descripci√≥n</label>
                        <input type="text" name="descripcion" id="saleDescripcion" placeholder="Descripci√≥n (opcional)">
                    </div>
                    <div class="input-group">
                        <label>Valor ($)</label>
                        <input type="number" name="valor" placeholder="0.00" required>
                    </div>
                    <div class="input-group">
                        <label>M√©todo de Pago</label>
                        <select name="metodo_pago" required>
                            <option value="Efectivo">Efectivo</option>
                            <option value="Tarjeta">Tarjeta</option>
                            <option value="NEQUI">NEQUI</option>
                            <option value="Daviplata">Daviplata</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">Registrar Venta</button>
                </form>
            </section>

            <!-- Gastos Section -->
            <section id="expenses" class="tab-content">
                <h2>Registrar Gasto</h2>
                <form id="expenseForm">
                    <div class="input-group">
                        <label>Descripci√≥n</label>
                        <input type="text" name="descripcion" placeholder="Descripci√≥n del gasto" required>
                    </div>
                    <div class="input-group">
                        <label>Valor ($)</label>
                        <input type="number" name="valor" placeholder="0.00" required>
                    </div>
                    <button type="submit" class="submit-btn">Registrar Gasto</button>
                </form>
            </section>


            <!-- Gastos Mensuales Section -->
            <section id="monthly-expenses" class="tab-content">
                <h2>Gastos Mensuales Fijos</h2>
                <div class="input-group" style="max-width: 300px; margin-bottom: 2rem;">
                    <label>Seleccionar Mes</label>
                    <input type="month" id="monthlyExpensesMonth" onchange="loadMonthlyExpenses()">
                </div>

                <form id="monthlyExpensesForm" onsubmit="saveMonthlyExpenses(event)">
                    <div class="input-group">
                        <label>Arriendo Local</label>
                        <input type="number" name="arriendo" placeholder="0.00" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Servicio de Agua</label>
                        <input type="number" name="agua" placeholder="0.00" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Servicio de Electricidad (Codensa)</label>
                        <input type="number" name="electricidad" placeholder="0.00" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Servicio de Internet y TV (Claro)</label>
                        <input type="number" name="internet" placeholder="0.00" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Cuota Banco (Davivienda)</label>
                        <input type="number" name="banco" placeholder="0.00" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Contrato Monica</label>
                        <input type="number" name="monica" placeholder="0.00" step="0.01">
                    </div>
                    <button type="submit" class="submit-btn">Guardar Gastos Mensuales</button>
                </form>
            </section>

            <!-- Inventory Section -->
            <section id="inventory" class="tab-content">
                <h2>Gesti√≥n de Inventario</h2>
                <form id="inventoryForm">
                    <div class="input-group">
                        <label>Producto</label>
                        <input type="text" name="producto" list="productList"
                            placeholder="Seleccione o escriba un producto" required>
                        <datalist id="productList">
                            <!-- Populated by JS -->
                        </datalist>
                    </div>
                    <div class="input-group">
                        <label>Marca</label>
                        <input type="text" name="marca" placeholder="Marca del producto (opcional)">
                    </div>
                    <div class="input-group">
                        <label>Descripci√≥n</label>
                        <input type="text" name="descripcion" placeholder="Descripci√≥n del producto (opcional)">
                    </div>
                    <div class="input-group">
                        <label>Cantidad</label>
                        <input type="number" name="cantidad" placeholder="0" step="0.01" required>
                    </div>
                    <div class="input-group">
                        <label>Unidad de Medida</label>
                        <select name="unidad" required>
                            <option value="Unidad">Unidad (und)</option>
                            <option value="Mililitros">Mililitros (ml)</option>
                            <option value="Gramos">Gramos (g)</option>
                            <option value="Litros">Litros (L)</option>
                            <option value="Kilos">Kilos (kg)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Valor Unitario ($)</label>
                        <input type="number" name="valor" placeholder="0.00" required>
                    </div>
                    <div class="input-group">
                        <label>Estado</label>
                        <select name="estado" required>
                            <option value="Nuevo">Nuevo</option>
                            <option value="Usado">Usado</option>
                            <option value="Agotado">Agotado</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">Guardar en Inventario</button>
                </form>

                <div class="table-container" style="margin-top: 2rem;">
                    <h3>Inventario Actual</h3>
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Marca</th>
                                <th>Descripci√≥n</th>
                                <th>Cantidad</th>
                                <th>Unidad</th>
                                <th>Valor Unitario</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Summary Section -->
            <section id="summary" class="tab-content">
                <h2>Resumen Diario</h2>

                <div class="filters-container" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                    <div class="input-group" style="flex: 1; min-width: 200px;">
                        <label>Fecha</label>
                        <input type="date" id="filterDate" onchange="loadSummary()">
                    </div>
                    <div class="input-group" style="flex: 1; min-width: 200px;">
                        <label>Filtrar por Estilista</label>
                        <select id="filterStylist" onchange="applyFilters()">
                            <option value="">Todos</option>
                            {% for stylist in stylists %}
                            <option value="{{ stylist }}">{{ stylist }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-group" style="flex: 1; min-width: 200px;">
                        <label>Filtrar por Servicio</label>
                        <select id="filterService" onchange="applyFilters()">
                            <option value="">Todos</option>
                            {% for service in services %}
                            <option value="{{ service.name }}" data-price="{{ service.value }}">{{ service.name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div id="paymentSubtotals" class="payment-subtotals">
                    <!-- Populated by JS -->
                </div>

                <div id="cashSufficiencyIndicator" class="sufficiency-card"
                    style="display: none; margin-bottom: 1rem; padding: 1rem; border-radius: 8px; font-weight: bold; text-align: center;">
                    <!-- Populated by JS -->
                </div>

                <div class="table-container">
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Estilista</th>
                                <th>Servicio/Producto</th>
                                <th>Valor</th>
                                <th>Comisi√≥n</th>
                                <th>M√©todo Pago</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="summaryBody">
                            <!-- Populated by JS -->
                        </tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td colspan="2">TOTAL VENTAS</td>
                                <td id="totalValue">$0</td>
                                <td id="totalCommission">$0</td>
                                <td colspan="2"></td>
                            </tr>
                            <tr class="total-row">
                                <td colspan="2">TOTAL GASTOS</td>
                                <td id="totalExpenses" colspan="4">$0</td>
                            </tr>
                            <tr class="total-row profit-row">
                                <td colspan="2">UTILIDAD</td>
                                <td id="totalProfit" colspan="4">$0</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 1rem;">
                    <button class="submit-btn" onclick="loadSummary()">Actualizar</button>
                    <button class="submit-btn" onclick="downloadPDF()" style="background: #d4af37;">Descargar
                        PDF</button>
                </div>
            </section>

            <!-- Statistics Section -->
            <section id="statistics" class="tab-content">
                <h2>Estad√≠sticas Mensuales</h2>

                <div class="input-group" style="max-width: 300px; margin-bottom: 2rem;">
                    <label>Seleccionar Mes</label>
                    <input type="month" id="statsMonth" onchange="loadStatistics()">
                </div>

                <div class="stats-cards"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                    <div class="stat-card">
                        <h3>Ventas Netas</h3>
                        <p class="stat-value" id="statsVentas">$0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Gastos</h3>
                        <p class="stat-value" id="statsGastos">$0</p>
                    </div>
                    <div class="stat-card">
                        <h3>N√≥mina Total</h3>
                        <p class="stat-value" id="statsNomina">$0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Utilidad</h3>
                        <p class="stat-value" id="statsUtilidad">$0</p>
                    </div>
                    <div class="stat-card"
                        style="border-color: rgba(234, 179, 8, 0.4); background: rgba(234, 179, 8, 0.1);">
                        <h3 style="color: #fde047;">Gastos Fijos</h3>
                        <p class="stat-value" id="statsGastosFijos"
                            style="background: linear-gradient(to right, #fde047, #ea580c); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                            $0</p>
                    </div>
                    <div class="stat-card"
                        style="border-color: rgba(34, 197, 94, 0.4); background: rgba(34, 197, 94, 0.1);">
                        <h3 style="color: #4ade80;">Utilidad Real</h3>
                        <p class="stat-value" id="statsUtilidadReal"
                            style="background: linear-gradient(to right, #4ade80, #16a34a); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                            $0</p>
                    </div>
                </div>

                <div class="charts-container"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    <div class="chart-wrapper">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Distribuci√≥n de N√≥mina</h3>
                        <canvas id="payrollChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Ventas por Estilista</h3>
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>

                <div class="charts-container"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    <div class="chart-wrapper" style="width: 100%;">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Top Servicios Realizados</h3>
                        <canvas id="servicesChart"></canvas>
                    </div>
                </div>

                <div class="chart-wrapper" style="margin-bottom: 2rem;">
                    <h3 style="text-align: center; margin-bottom: 1rem;">Hist√≥rico de Ventas Mensuales (√öltimos 3 A√±os)
                    </h3>
                    <canvas id="timelineChart"></canvas>
                </div>

                <div class="chart-wrapper" style="margin-bottom: 2rem; border-left: 4px solid #d4af37;">
                    <h3 style="text-align: center; margin-bottom: 0.5rem;">üîÆ Predicci√≥n de Ingresos (Pr√≥ximos 7 D√≠as)
                    </h3>
                    <p style="text-align: center; color: #94a3b8; font-size: 0.85rem; margin-bottom: 1.5rem;">Basado en
                        los √∫ltimos 11 meses de actividad</p>
                    <canvas id="predictionChart"></canvas>
                    <div id="predictionSummary"
                        style="margin-top: 1rem; color: #cbd5e1; font-size: 0.9rem; background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px; display: none;">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div class="chart-wrapper" style="margin-bottom: 2rem; border-left: 4px solid #10b981;">
                    <h3 style="text-align: center; margin-bottom: 0.5rem;">üí∏ Mapa de Calor de Ingresos (Semanal)</h3>
                    <p style="text-align: center; color: #94a3b8; font-size: 0.85rem; margin-bottom: 1.5rem;">
                        An√°lisis de volumen de ventas por d√≠a de la semana
                    </p>
                    <div style="min-height: 350px;">
                        <canvas id="revenueHeatmapChart"></canvas>
                    </div>
                    <div id="revenueInference"
                        style="margin-top: 1rem; color: #cbd5e1; font-size: 0.95rem; background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(16, 185, 129, 0.2);">
                        <!-- Populated by JS -->
                        Cargando inferencia...
                    </div>
                </div>

                <div class="chart-wrapper" style="margin-bottom: 2rem; border-left: 4px solid #3b82f6;">
                    <h3 style="text-align: center; margin-bottom: 0.5rem;">üìà Demanda de Servicios (Predictivo)</h3>
                    <p style="text-align: center; color: #94a3b8; font-size: 0.85rem; margin-bottom: 1.5rem;">
                        Hist√≥rico 60 d√≠as + Predicci√≥n 7 d√≠as
                    </p>
                    <div style="min-height: 400px;">
                        <canvas id="serviceDemandChart"></canvas>
                    </div>
                    <div id="growthInference"
                        style="margin-top: 1rem; color: #cbd5e1; font-size: 0.95rem; background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(59, 130, 246, 0.2); display: none;">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <h3>N√≥mina por Estilista</h3>
                <div class="table-container">
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Estilista</th>
                                <th>Comisiones</th>
                            </tr>
                        </thead>
                        <tbody id="statsNominaBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>

                <h3 style="margin-top: 2rem;">Ventas por Estilista</h3>
                <div class="table-container">
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Estilista</th>
                                <th>Total Ventas</th>
                            </tr>
                        </thead>
                        <tbody id="statsVentasBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>

                <h3 style="margin-top: 2rem;">Inventario Resumido</h3>

                <!-- Gr√°fico de barras: Cantidad por Producto -->
                <div class="chart-wrapper"
                    style="margin-top: 1rem; margin-bottom: 2rem; border-left: 4px solid #8b5cf6;">
                    <h3 style="text-align: center; margin-bottom: 0.5rem;">üì¶ Stock por Producto (Cantidad)</h3>
                    <p style="text-align: center; color: #94a3b8; font-size: 0.85rem; margin-bottom: 1.5rem;">
                        Comparativa de unidades disponibles en inventario
                    </p>
                    <div style="min-height: 300px;">
                        <canvas id="inventoryBarChart"></canvas>
                    </div>
                </div>

                <div class="table-container">
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Cantidad</th>
                                <th>Unidad</th>
                                <th>Valor Total</th>
                            </tr>
                        </thead>
                        <tbody id="statsInventoryBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Config Section -->
            <section id="config" class="tab-content">
                <h2>Configuraci√≥n de Estilistas</h2>

                <div class="config-container">
                    <h3>Agregar Nuevo Estilista</h3>
                    <form id="addStylistForm">
                        <div class="input-group">
                            <input type="text" name="name" placeholder="Nombre del nuevo estilista" required>
                        </div>
                        <div class="input-group" style="display: flex; gap: 10px; margin-top: 10px;">
                            <div style="flex: 1;">
                                <label style="font-size: 0.85rem; color: #666;">Comisi√≥n %</label>
                                <input type="number" name="commission" value="50" min="0" max="100" step="1"
                                    style="width: 100%;">
                            </div>
                            <div style="flex: 1;">
                                <label style="font-size: 0.85rem; color: #666;">Comisi√≥n Especial %</label>
                                <input type="number" name="special_commission" value="50" min="0" max="100" step="1"
                                    style="width: 100%;">
                            </div>
                        </div>
                        <button type="submit" class="submit-btn" style="margin-top: 10px;">Agregar</button>
                    </form>

                    <h3 style="margin-top: 2rem;">Lista de Estilistas</h3>
                    <ul class="stylist-list" id="stylistsList">
                        <!-- Populated by JS -->
                    </ul>

                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #e5e7eb;">

                    <h3>Agregar Nuevo Servicio</h3>
                    <form id="addServiceForm">
                        <div class="input-group">
                            <input type="text" name="name" placeholder="Nombre del nuevo servicio" required>
                        </div>
                        <div class="input-group">
                            <input type="number" name="value" placeholder="Valor sugerido ($)" required>
                        </div>
                        <button type="submit" class="submit-btn" style="width:100%">Agregar</button>
                    </form>

                    <h3 style="margin-top: 2rem;">Lista de Servicios</h3>
                    <ul class="stylist-list" id="servicesList">
                        <!-- Populated by JS -->
                    </ul>

                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #e5e7eb;">

                    <h3>Gesti√≥n de Sedes</h3>
                    <form id="addSedeForm" onsubmit="addSedeHandler(event)">
                        <div class="input-group">
                            <input type="text" name="name" placeholder="Nombre de la nueva sede" required>
                        </div>
                        <button type="submit" class="submit-btn">Agregar</button>
                    </form>

                    <h3 style="margin-top: 2rem;">Lista de Sedes</h3>
                    <ul class="stylist-list" id="sedesList">
                        {% for sede in sedes %}
                        <li class="stylist-item">
                            <span>{{ sede }}</span>
                            <button class="delete-btn" onclick="deleteSede('{{ sede }}')">Eliminar</button>
                        </li>
                        {% endfor %}
                    </ul>

                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #e5e7eb;">

                    <h3>Gesti√≥n de Usuarios</h3>
                    <form id="addUserForm" onsubmit="addUserHandler(event)">
                        <div class="input-group">
                            <input type="text" name="username" placeholder="Usuario" required>
                        </div>
                        <div class="input-group">
                            <input type="password" name="password" placeholder="Contrase√±a" required>
                        </div>
                        <button type="submit" class="submit-btn" style="margin-bottom: 1rem;">Agregar Usuario</button>
                    </form>

                    <h3 style="margin-top: 2rem;">Lista de Usuarios</h3>
                    <ul class="stylist-list" id="usersList" style="margin-bottom: 2rem;">
                        <!-- Populated by JS -->
                    </ul>

                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #e5e7eb;">

                    <h3>Propiedad Intelectual</h3>
                    <div
                        style="background: rgba(212, 175, 55, 0.1); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(212, 175, 55, 0.3); text-align: center;">
                        <p style="margin-bottom: 1rem; color: #d4af37; font-weight: 600;">Este software est√° protegido
                            por leyes de propiedad intelectual.</p>
                        <a href="/certificado" target="_blank" class="submit-btn"
                            style="display: inline-block; text-decoration: none; background: linear-gradient(135deg, #d4af37, #aa8c2c); color: white; padding: 0.8rem 1.5rem; border-radius: 8px; font-weight: 600;">Ver
                            Certificado de Propiedad</a>
                    </div>
                </div>
            </section>
        </main>

        <div id="notification" class="notification hidden">
            <p id="notif-message"></p>
        </div>
    </div>


    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        // =============================================
        // Toggle MODO OSCURO
        // =============================================
        const DARK_MODE_KEY = 'darkMode';

        function applyDarkMode(enabled) {
            const btn = document.getElementById('darkmodeBtn');
            const icon = document.getElementById('dmIcon');
            const label = document.getElementById('dmLabel');
            if (enabled) {
                document.body.classList.add('dark-mode');
                icon.textContent = '‚òÄÔ∏è';
                label.textContent = 'Modo Claro';
            } else {
                document.body.classList.remove('dark-mode');
                icon.textContent = 'üåô';
                label.textContent = 'Modo Oscuro';
            }
        }

        function toggleDarkMode() {
            const isDark = document.body.classList.contains('dark-mode');
            const newState = !isDark;
            localStorage.setItem(DARK_MODE_KEY, newState ? '1' : '0');
            applyDarkMode(newState);
        }

        // =============================================
        // Toggle APARIENCIA CONTENEDOR (glass / s√≥lido)
        // =============================================
        const CONTAINER_STYLE_KEY = 'containerStyle';

        function applyContainerStyle(style) {
            const container = document.querySelector('.container');
            const toggleGlass = document.getElementById('toggleOptGlass');
            const toggleSolid = document.getElementById('toggleOptSolid');

            if (style === 'glass') {
                container.classList.remove('container-solid');
                container.classList.add('container-glass');
                toggleGlass.classList.add('active');
                toggleSolid.classList.remove('active');
            } else {
                container.classList.remove('container-glass');
                container.classList.add('container-solid');
                toggleSolid.classList.add('active');
                toggleGlass.classList.remove('active');
            }
        }

        function toggleContainerStyle() {
            const container = document.querySelector('.container');
            const isSolid = container.classList.contains('container-solid');
            const newStyle = isSolid ? 'glass' : 'solid';
            localStorage.setItem(CONTAINER_STYLE_KEY, newStyle);
            applyContainerStyle(newStyle);
        }

        // =============================================
        // Aplicar preferencias al cargar la p√°gina
        // =============================================
        (function () {
            const savedDark = localStorage.getItem(DARK_MODE_KEY);
            applyDarkMode(savedDark === '1');

            const savedStyle = localStorage.getItem(CONTAINER_STYLE_KEY) || 'solid';
            applyContainerStyle(savedStyle);
        })();
    </script>
</body>

</html>